{% extends "base.html" %}


{% block content %}
<div class="d-flex flex-column my-4 gap-2">
  <div class="d-flex justify-content-between align-items-start">
    <img src="{{ user.avatar(128) }}" class="rounded" />
    <div>
      {% if user == current_user %}
      <a href="{{ url_for('edit_profile') }}" class="btn btn-outline-primary" tabindex="-1" role="button">
        Edit your profile
      </a>
      {% elif not current_user.is_following(user) %}
      <form action="{{ url_for('follow', username=user.username) }}" method="post">
        {{ form.hidden_tag() }}
        {{ form.submit(value='Follow', class='btn btn-outline-primary') }}
      </form>
      {% else %}
      <form action="{{ url_for('unfollow', username=user.username) }}" method="post">
        {{ form.hidden_tag() }}
        {{ form.submit(value='Unfollow', class='btn btn-outline-primary') }}
      </form>
      {% endif %}
    </div>
  </div>
  <div class="fs-5">{{ user.username }}</div>
  {% if user.about_me %}
  <div class="text-muted text-break" style="font-size: 0.8rem;">{{ user.about_me }}</div>
  {% endif%}
  <div>
    {{ user.followers_count() }} <span class="text-muted">followers</span>
    <span class="mx-2">Â·</span>
    {{ user.following_count() }} <span class="text-muted">following</span>
  </div>
  {% if user.last_seen %}<div>{{ user.last_seen }}</div>{% endif %}
</div>

{% for post in posts %}
{% include '_post.html' %}
{% endfor %}
{% include '_pagination.html' %}
{% endblock %}
