{% from 'bootstrap5/nav.html' import render_nav_item %}
{% from 'bootstrap5/utils.html' import render_messages, render_icon %}


<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.svg') }}">
  {{ bootstrap.load_css() }}

  {% if title %}
  <title>{{ title }} - Microblog</title>
  {% else %}
  <title>Welcome to Microblog</title>
  {% endif %}
</head>

<body>
  <nav class="navbar navbar-expand-lg sticky-top shadow-sm" style="backdrop-filter: blur(8px);">
    <div class="container">
      <a class="navbar-brand" href="{{ url_for('main.index') }}">
        {{ render_icon('book', 24, 'primary') }}
        <span class="ms-2"></span>Microblog</span>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto">
          {{ render_nav_item('main.index', 'Home') }}
          {{ render_nav_item('main.explore', 'Explore') }}
        </ul>
        <ul class="navbar-nav">
          {% if current_user.is_anonymous %}
          {{ render_nav_item('auth.login', 'Login') }}
          {% else %}
          {{ render_nav_item('main.user', 'Profile', username=current_user.username) }}
          {{ render_nav_item('auth.logout', 'Logout') }}
          {% endif %}
        </ul>
      </div>
    </div>
  </nav>

  <main class="container-fluid d-flex justify-content-center">
    <div class="col-12 col-sm-10 col-md-8 col-lg-6 col-xl-5">
      <div class="position-fixed bottom-0 end-0 mb-2 me-3">
        {{ render_messages(container=False, dismissible=True, dismiss_animate=True) }}
      </div>
      {% block content %}{% endblock %}
    </div>
  </main>

  {{ bootstrap.load_js() }}
  {{ moment.include_moment() }}
</body>

</html>
